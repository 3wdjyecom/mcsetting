<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服务器设置生成器</title>
    <style>
        #cssdiv {
            width: 50%;
            background-color: #4e504d2f;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            background-size: cover; /* 确保背景图像覆盖整个区域 */
            background-position: center; /* 将背景图像居中显示 */
            position: absolute;
            transform: translate(-50% , -50%);
            left: 50%;
            top: 58%;
        }
        body {
            background-size: cover;
            background-repeat: no-repeat;
            font-family: Arial, sans-serif;
            background-color: #4e504dab;
            margin: 0; /* 去除页面默认的边距 */
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="cssdiv">
    <laber for="name">服务器名称：</laber>
    <input type="text" id="name" name="name" placeholder="请输入服务器名称"><br>
    <div>
    <h2>服务器联机设置</h2>
        <label>IPV4端口</label>
        <input type="number" id="server-port" placeholder="默认19132，1-65535"><br>
        <label>IPV6端口</label>
        <input type="number" id="server-portv6" placeholder="默认19133，1-65535"><br>
        <label>局域网内可发现（必须启用）</label>
        <input type="checkbox" checked disabled><br>
        <label style="color: rgb(2, 237, 80);">在线验证(若开启，没有正版的玩家无法进入游戏)</label>
        <input type = 'checkbox' id = 'online-mode'>
        <br>
        <label style="color: rgb(226, 43, 43);">白名单(若开启，则被添加的玩家才能加入)</label>
        <input type = 'checkbox' id = 'allow-list'>
        <br>
        <laber>最大玩家数量：</laber>
        <input type="number" id="max-players" name="max-players" placeholder="请输入最大玩家数量"><br>
        <br>
    </dvi>
    <div>
    <h2>游戏玩法设置</h2>
        <laber for="gamemode">游戏模式</laber>
        <select id="gamemode">
        <option value="survival">生存模式</option>
        <option value="creative">创造模式</option>
        <option value="adventure">冒险模式</option>
        </select>
        <laber style="color: brown;">强制同步游戏模式</laber>
        <input type="checkbox" id="force-gamemode"><br>
        <label for="difficulty">选择难度</label>
        <select id="difficulty">
        <option value="peaceful">和平</option>
        <option value="easy">简单</option>
        <option value="normal">普通</option>
        <option value="hard">困难</option>
        </select>
        <br>
        <label>挂机踢出时间</label>
        <input type="number" id="player-idle-timeout" placeholder="单位分钟，0为关闭该功能"><br>
    <label>允许作弊</label>
    <input type = 'checkbox' id = 'allow-cheats'>
    <br>
    <label>存档名称</label>
    <input type="text" id="level-name" placeholder="默认为Bedrock level"><br>
    <label>世界种子</label>
    <input type="number" id="level-seed" placeholder="新建世界有效，留空为随机"><br>
    <label>默认玩家权限</label>
    <select id="default-player-permission-level">
        <option value="visitor">访客</option>
        <option value="member">成员</option>
        <option value="operator">管理员</option>    
    </select>
    <br>
    </div>
    <div>
        <h2>根据服务器性能设置</h2>
        <label>渲染距离</label>
        <input type="number" id="view-distance" placeholder="建议4-64，根据性能自行填写"><br>
        <label>模拟距离</label>
        <input type="number" id="tick-distance" placeholder="建议4-16，请根据实际性能填写"><br>
        <label>服务端可使用的最大线程数</label>
        <input type="number" id="max-threads" placeholder="0为全部"><br>
        <label>强制同步材质包</label>
        <input type="checkbox" id="texturepack-required">
        <laber>启用日志</laber>
        <input type="checkbox" id="content-log-file-enabled">
        <br>
        <button onclick="setting()">生成配置文件</button>
    </div>
    </div>
    <script>
        function getRandomBackgroundImage(isMobile) {
            // 定义不同设备的背景图片列表
            const mobileImages = ['./bgmo/3.jpg', './bgmo/1.jpg', './bgmo/2.jpg', './bgmo/4.jpg', './bgmo/5.jpg',]; // 手机端背景图片列表
            const desktopImages = ['./bg/1.jpg', './bg/2.jpg', './bg/3.jpg', './bg/4.jpg', './bg/5.jpg', './bg/6.jpg', './bg/7.jpg', './bg/8.jpg',]; // PC端背景图片列表

            // 选择对应设备的图片列表
            const images = isMobile ? mobileImages : desktopImages;

            // 随机选择一张图片
            const randomImage = images[Math.floor(Math.random() * images.length)];
            document.body.style.backgroundImage = 'url("' + randomImage + '")';
        }

        function detectDeviceAndSetRandomBackground() {
            const isMobile = /Mobi|Android/i.test(navigator.userAgent);
            getRandomBackgroundImage(isMobile);
        }

        // 页面加载完成后执行检测并更改背景
        window.onload = detectDeviceAndSetRandomBackground;

        var okgo = "1";
        function setting() {
            var sp4 = document.getElementById("server-port");
            var sp6 = document.getElementById("server-portv6");
            if (sp4.value <1 || sp4.value > 65535){
                alert ("IPV4端口不对");
                sp4.value = "";
            }
            if (sp6.value <1 || sp6.value > 65535){
                alert ("IPV6端口不对");
                sp6.value = "";
            }
            if (sp4.value === "" || sp6.value === "" ){
                okgo = "0" 
            };
            
            var severName = document.getElementById("name").value;
            var severgamemode = document.getElementById("gamemode").value;
            var forceGamemode = document.getElementById("force-gamemode").checked ? "true" : "false";
            var difficulty = document.getElementById("difficulty").value;
            var allowCheats = document.getElementById("allow-cheats").checked ? "true" : "false";
            var player =document.getElementById("max-players").value;
            var onlineMode = document.getElementById("online-mode").checked ? "true" : "false";
            var allowList = document.getElementById("allow-list").checked ? "true" : "false";
            var serverPort = document.getElementById("server-port").value || "19132";
            var serverPortv6 = document.getElementById("server-portv6").value || "19133";
            var viewDistance = document.getElementById("view-distance").value;
            var tickDistance = document.getElementById("tick-distance").value;
            var playerIdleTimeout = document.getElementById("player-idle-timeout").value || "0";
            var maxThreads = document.getElementById("max-threads").value || "0";
            var levelName = document.getElementById("level-name").value || "Bedrock level";
            var levelSeed = document.getElementById("level-seed").value || "";
            var defaultPlayerPermissionLevel = document.getElementById("default-player-permission-level").value || "visitor";
            var texturepackRequired = document.getElementById("texturepack-required").checked ? "true" : "false";
            var contentLogFileEnabled = document.getElementById("content-log-file-enabled").checked ? "true" : "false";
            config ="server-name=" + severName + "\n" +
                    "gamemode=" + severgamemode + "\n" +
                    "force-gamemode=" + forceGamemode + "\n" +
                    "difficulty=" + difficulty + "\n" +
                    "allow-cheats=" + allowCheats + "\n" +
                    "max-players=" + player + "\n" +
                    "online-mode=" + onlineMode + "\n" +
                    "allow-list=" + allowList + "\n" +
                    "server-portv4=" + serverPort + "\n" +
                    "server-portv6=" + serverPortv6 + "\n" +
                    "view-distance=" + viewDistance + "\n" +
                    "tick-distance=" + tickDistance + "\n" +
                    "player-idle-timeout=" + playerIdleTimeout + "\n" +
                    "max-threads=" + maxThreads + "\n" +
                    "level-name=" + levelName + "\n" +
                    "level-seed=" + levelSeed + "\n" +
                    "default-player-permission-level=" + defaultPlayerPermissionLevel + "\n";
                    "texturepack-required=" + texturepackRequired +"\n";
                    "content-log-file-enabled=" + contentLogFileEnabled + "\n";
                    if (okgo == "1"){
                        var blob = new Blob([config], { type: "text/plain;charset=utf-8" });
                        var link = document.createElement("a");
                        link.href = URL.createObjectURL(blob);
                        link.download = "server.properties";
                        document.body.appendChild(link);
                        link.click();
                    };
        }
    </script>
    
</body>
</html>